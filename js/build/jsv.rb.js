/*
 URI.js v1.3 (c) 2010 Gary Court. License: http://github.com/garycourt/uri-js
*/
(function(){if(!this.require){var q={},u={},j=function(g,k){var a=d(k,g),b=u[a],c;if(b)return b.exports;if(c=q[a]||q[a=d(a,"./index")]){b={id:a,exports:{}};try{return u[a]=b,c(b.exports,function(b){return j(b,a.split("/").slice(0,-1).join("/"))},b),b.exports}catch(f){throw delete u[a],f;}}else throw"module '"+g+"' not found";},d=function(d,j){var a=[],b,c;b=/^\.\.?(\/|$)/.test(j)?[d,j].join("/").split("/"):j.split("/");for(var f=0,e=b.length;f<e;f++)c=b[f],".."==c?a.pop():"."!=c&&""!=c&&a.push(c);
return a.join("/")};this.require=function(d){return j(d,"")};this.require.define=function(d){for(var j in d)q[j]=d[j]}}return this.require.define}).call(this)({environments:function(q,u){u("./json-schema-draft-01");u("./json-schema-draft-02");u("./json-schema-draft-03")},"json-schema-draft-01":function(q,u){var j={},d=u("./jsv").JSV,g,k;k={string:function(a){return"string"===a.getType()},number:function(a){return"number"===a.getType()},integer:function(a){return"number"===a.getType()&&0===a.getValue()%
1},"boolean":function(a){return"boolean"===a.getType()},object:function(a){return"object"===a.getType()},array:function(a){return"array"===a.getType()},"null":function(a){return"null"===a.getType()},any:function(){return!0}};g=new d.Environment;g.setOption("defaultFragmentDelimiter",".");g.setOption("defaultSchemaURI","http://json-schema.org/schema#");k=g.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/schema#",type:"object",properties:{type:{type:["string",
"array"],items:{type:["string",{$ref:"#"}]},optional:!0,uniqueItems:!0,"default":"any",parser:function(a,b){var c;return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?(c=b.getValueOfProperty("parser"),d.mapArray(a.getProperties(),function(a){return c(a,b)})):"any"},validator:function(a,b,c,f,e,i,l){var h=d.toArray(b.getAttribute("type")),p,m,t,g;if("undefined"!==a.getType()&&h&&h.length){g=
c.getValueOfProperty("typeValidators")||{};c=0;for(p=h.length;c<p;++c)if(m=h[c],d.isJSONSchema(m)){if(t=d.createObject(f),t.errors=[],t.validated=d.clone(f.validated),0===m.validate(a,t,e,i,l).errors.length)return!0}else if(g[m]!==j[m]&&"function"===typeof g[m]){if(g[m](a,f))return!0}else return!0;f.addError(a,b,"type","Instance is not a required type",h);return!1}return!0},typeValidators:k},properties:{type:"object",additionalProperties:{$ref:"#"},optional:!0,"default":{},parser:function(a,b,c){var f=
a.getEnvironment(),e=b.getEnvironment();return"object"===a.getType()?c?f.createSchema(a.getProperty(c),e.findSchema(b.resolveURI("#"))):d.mapObject(a.getProperties(),function(a){return f.createSchema(a,e.findSchema(b.resolveURI("#")))}):{}},validator:function(a,b,c,d){var e;if("object"===a.getType())for(e in c=b.getAttribute("properties"),c)c[e]!==j[e]&&c[e]&&c[e].validate(a.getProperty(e),d,a,b,e)}},items:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,b){return"object"===
a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?d.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):a.getEnvironment().createEmptySchema()},validator:function(a,b,c,f){var e,i,l,h,p;if("array"===a.getType())if(c=a.getProperties(),e=b.getAttribute("items"),p=b.getAttribute("additionalProperties"),"array"===d.typeOf(e)){i=0;for(l=c.length;i<l;++i)h=
e[i]||p,!1!==h?h.validate(c[i],f,a,b,i):f.addError(a,b,"additionalProperties","Additional items are not allowed",h)}else{h=e||p;i=0;for(l=c.length;i<l;++i)h.validate(c[i],f,a,b,i)}}},optional:{type:"boolean",optional:!0,"default":!1,parser:function(a){return!!a.getValue()},validator:function(a,b,c,d){"undefined"===a.getType()&&!b.getAttribute("optional")&&d.addError(a,b,"optional","Property is required",!1)},validationRequired:!0},additionalProperties:{type:[{$ref:"#"},"boolean"],optional:!0,"default":{},
parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"boolean"===a.getType()&&!1===a.getValue()?!1:a.getEnvironment().createEmptySchema()},validator:function(a,b,c,f){var e,i,l;if("object"===a.getType())for(l in c=b.getAttribute("additionalProperties"),e=b.getAttribute("properties")||{},i=a.getProperties(),i)i[l]!==j[l]&&(i[l]&&!e[l])&&(d.isJSONSchema(c)?c.validate(i[l],f,a,b,l):!1===c&&f.addError(a,b,"additionalProperties",
"Additional properties are not allowed",c))}},requires:{type:["string",{$ref:"#"}],optional:!0,parser:function(a,b){if("string"===a.getType())return a.getValue();if("object"===a.getType())return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))},validator:function(a,b,c,f,e){"undefined"!==a.getType()&&(e&&"undefined"!==e.getType())&&(c=b.getAttribute("requires"),"string"===typeof c?"undefined"===e.getProperty(c).getType()&&f.addError(a,b,"requires",'Property requires sibling property "'+
c+'"',c):d.isJSONSchema(c)&&c.validate(e,f))}},minimum:{type:"number",optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("minimum"),e=b.getAttribute("minimumCanEqual"),"number"===typeof c&&(a.getValue()<c||!1===e&&a.getValue()===c)&&d.addError(a,b,"minimum","Number is less than the required minimum value",c))}},maximum:{type:"number",optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},
validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("maximum"),e=b.getAttribute("maximumCanEqual"),"number"===typeof c&&(a.getValue()>c||!1===e&&a.getValue()===c)&&d.addError(a,b,"maximum","Number is greater than the required maximum value",c))}},minimumCanEqual:{type:"boolean",optional:!0,requires:"minimum","default":!0,parser:function(a){return"boolean"===a.getType()?a.getValue():!0}},maximumCanEqual:{type:"boolean",optional:!0,requires:"maximum","default":!0,parser:function(a){return"boolean"===
a.getType()?a.getValue():!0}},minItems:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){"array"===a.getType()&&(c=b.getAttribute("minItems"),"number"===typeof c&&a.getProperties().length<c&&d.addError(a,b,"minItems","The number of items is less than the required minimum",c))}},maxItems:{type:"integer",optional:!0,minimum:0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,
b,c,d){"array"===a.getType()&&(c=b.getAttribute("maxItems"),"number"===typeof c&&a.getProperties().length>c&&d.addError(a,b,"maxItems","The number of items is greater than the required maximum",c))}},pattern:{type:"string",optional:!0,format:"regex",parser:function(a){if("string"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;try{e=RegExp(b.getAttribute("pattern")),"string"===a.getType()&&(e&&!e.test(a.getValue()))&&d.addError(a,b,"pattern","String does not match pattern",e.toString())}catch(i){d.addError(a,
b,"pattern","Invalid pattern",i)}}},minLength:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){"string"===a.getType()&&(c=b.getAttribute("minLength"),"number"===typeof c&&a.getValue().length<c&&d.addError(a,b,"minLength","String is less than the required minimum length",c))}},maxLength:{type:"integer",optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){"string"===
a.getType()&&(c=b.getAttribute("maxLength"),"number"===typeof c&&a.getValue().length>c&&d.addError(a,b,"maxLength","String is greater than the required maximum length",c))}},"enum":{type:"array",optional:!0,minItems:1,uniqueItems:!0,parser:function(a){if("array"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e,i;if("undefined"!==a.getType()&&(c=b.getAttribute("enum"))){e=0;for(i=c.length;e<i;++e)if(a.equals(c[e]))return!0;d.addError(a,b,"enum","Instance is not one of the possible values",
c)}}},title:{type:"string",optional:!0},description:{type:"string",optional:!0},format:{type:"string",optional:!0,parser:function(a){if("string"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"string"===a.getType()&&(e=b.getAttribute("format"),c=c.getValueOfProperty("formatValidators"),"string"===typeof e&&(c[e]!==j[e]&&"function"===typeof c[e]&&!c[e].call(this,a,d))&&d.addError(a,b,"format","String is not in the required format",e))},formatValidators:{}},contentEncoding:{type:"string",
optional:!0},"default":{type:"any",optional:!0},maxDecimal:{type:"integer",optional:!0,minimum:0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("maxDecimal"),"number"===typeof c&&(e=a.getValue().toString(10).split(".")[1])&&e.length>c&&d.addError(a,b,"maxDecimal","The number of decimal places is greater than the allowed maximum",c))}},disallow:{type:["string","array"],items:{type:"string"},optional:!0,uniqueItems:!0,
parser:function(a){if("string"===a.getType()||"array"===a.getType())return a.getValue()},validator:function(a,b,c,f){var e=d.toArray(b.getAttribute("disallow")),i,l,h;if("undefined"!==a.getType()&&e&&e.length){h=c.getValueOfProperty("typeValidators")||{};c=0;for(i=e.length;c<i;++c)if(l=e[c],h[l]!==j[l]&&"function"===typeof h[l]&&h[l](a,f))return f.addError(a,b,"disallow","Instance is a disallowed type",e),!1}return!0},typeValidators:k},"extends":{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,
"default":{},parser:function(a,b){if("object"===a.getType())return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")));if("array"===a.getType())return d.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))})},validator:function(a,b,c,f,e,i,l){var b=b.getAttribute("extends"),h;if(b)if(d.isJSONSchema(b))b.validate(a,f,e,i,l);else if("array"===d.typeOf(b)){c=0;for(h=b.length;c<h;++c)b[c].validate(a,
f,e,i,l)}}}},optional:!0,"default":{},fragmentResolution:"dot-delimited",parser:function(a,b){if("object"===a.getType())return a.getEnvironment().createSchema(a,b)},validator:function(a,b,c,f,e,i,l){var h=b.getPropertyNames(),p,m=c.getAttribute("properties"),t;for(p in m)m[p]!==j[p]&&m[p].getValueOfProperty("validationRequired")&&d.pushUnique(h,p);p=0;for(c=h.length;p<c;++p)m[h[p]]!==j[h[p]]&&(t=m[h[p]].getValueOfProperty("validator"),"function"===typeof t&&t(a,b,m[h[p]],f,e,i,l))},initializer:function(a){var b;
(b=a._schema.getLink("describedby",a))&&a._schema._uri!==b&&a.setReference("describedby",b);b=a._schema.getLink("self",a);"string"===d.typeOf(b)&&(a._uri=d.formatURI(b));(b=a._schema.getLink("full",a))&&a._uri!==b&&a.setReference("full",b);b=a.getAttribute("extends");d.isJSONSchema(b)&&(b=d.inherits(b,a,!0),a=a._env.createSchema(b,a._schema,a._uri));return a}},!0,"http://json-schema.org/schema#");k=g.createSchema(d.inherits(k,g.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/hyper-schema#",
properties:{links:{type:"array",items:{$ref:"links#"},optional:!0,parser:function(a,b,c){var f=b.getValueOfProperty("items").$ref,e=b.getEnvironment().findSchema(f),i=e&&e.getValueOfProperty("parser"),c=d.toArray(c),a="function"===typeof i?d.mapArray(a.getProperties(),function(a){return i(a,e)}):d.toArray(a.getValue());c[0]&&(a=d.filterArray(a,function(a){return a.rel===c[0]}));c[1]&&(a=d.mapArray(a,function(a){var i=c[1],a=a.href;return(a=a.replace(/\{(.+)\}/g,function(a,b){var c;c="-this"===b?i.getValue():
i.getValueOfProperty(b);return void 0!==c?String(c):""}))?d.formatURI(i.resolveURI(a)):a}));return a}},fragmentResolution:{type:"string",optional:!0,"default":"dot-delimited"},root:{type:"boolean",optional:!0,"default":!1},readonly:{type:"boolean",optional:!0,"default":!1},pathStart:{type:"string",optional:!0,format:"uri",validator:function(a,b,c,d){"undefined"!==a.getType()&&(c=b.getAttribute("pathStart"),"string"===typeof c&&0!==a.getURI().indexOf(c)&&d.addError(a,b,"pathStart","Instance's URI does not start with "+
c,c))}},mediaType:{type:"string",optional:!0,format:"media-type"},alternate:{type:"array",items:{$ref:"#"},optional:!0}},links:[{href:"{$ref}",rel:"full"},{href:"{$schema}",rel:"describedby"},{href:"{id}",rel:"self"}]},k),!0),!0,"http://json-schema.org/hyper-schema#");g.setOption("defaultSchemaURI","http://json-schema.org/hyper-schema#");g.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/links#",type:"object",properties:{href:{type:"string"},rel:{type:"string"},
method:{type:"string","default":"GET",optional:!0},enctype:{type:"string",requires:"method",optional:!0},properties:{type:"object",additionalProperties:{$ref:"hyper-schema#"},optional:!0,parser:function(a,b,c){var f=a.getEnvironment(),e=b.getEnvironment(),i=b.getValueOfProperty("additionalProperties").$ref;if("object"===a.getType())return c?f.createSchema(a.getProperty(c),e.findSchema(b.resolveURI(i))):d.mapObject(a.getProperties(),function(a){return f.createSchema(a,e.findSchema(b.resolveURI(i)))})}}},
parser:function(a,b){var c=b.getProperty("properties");return"object"===a.getType()?d.mapObject(a.getProperties(),function(a,b){var i=c.getProperty(b),l=i&&i.getValueOfProperty("parser");return"function"===typeof l?l(a,i):a.getValue()}):a.getValue()}},k,"http://json-schema.org/links#");d.registerEnvironment("json-schema-draft-00",g);d.registerEnvironment("json-schema-draft-01",d.createEnvironment("json-schema-draft-00"));d.getDefaultEnvironmentID()||d.setDefaultEnvironmentID("json-schema-draft-01")},
"json-schema-draft-02":function(q,u){var j={},d=u("./jsv").JSV,g,k;k={string:function(a){return"string"===a.getType()},number:function(a){return"number"===a.getType()},integer:function(a){return"number"===a.getType()&&0===a.getValue()%1},"boolean":function(a){return"boolean"===a.getType()},object:function(a){return"object"===a.getType()},array:function(a){return"array"===a.getType()},"null":function(a){return"null"===a.getType()},any:function(){return!0}};g=new d.Environment;g.setOption("defaultFragmentDelimiter",
"/");g.setOption("defaultSchemaURI","http://json-schema.org/schema#");k=g.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/schema#",type:"object",properties:{type:{type:["string","array"],items:{type:["string",{$ref:"#"}]},optional:!0,uniqueItems:!0,"default":"any",parser:function(a,b){var c;return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?
(c=b.getValueOfProperty("parser"),d.mapArray(a.getProperties(),function(a){return c(a,b)})):"any"},validator:function(a,b,c,f,e,i,l){var h=d.toArray(b.getAttribute("type")),p,m,t,g;if("undefined"!==a.getType()&&h&&h.length){g=c.getValueOfProperty("typeValidators")||{};c=0;for(p=h.length;c<p;++c)if(m=h[c],d.isJSONSchema(m)){if(t=d.createObject(f),t.errors=[],t.validated=d.clone(f.validated),0===m.validate(a,t,e,i,l).errors.length)return!0}else if(g[m]!==j[m]&&"function"===typeof g[m]){if(g[m](a,f))return!0}else return!0;
f.addError(a,b,"type","Instance is not a required type",h);return!1}return!0},typeValidators:k},properties:{type:"object",additionalProperties:{$ref:"#"},optional:!0,"default":{},parser:function(a,b,c){var f=a.getEnvironment(),e=b.getEnvironment();return"object"===a.getType()?c?f.createSchema(a.getProperty(c),e.findSchema(b.resolveURI("#"))):d.mapObject(a.getProperties(),function(a){return f.createSchema(a,e.findSchema(b.resolveURI("#")))}):{}},validator:function(a,b,c,d){var e;if("object"===a.getType())for(e in c=
b.getAttribute("properties"),c)c[e]!==j[e]&&c[e]&&c[e].validate(a.getProperty(e),d,a,b,e)}},items:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?d.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):a.getEnvironment().createEmptySchema()},validator:function(a,
b,c,f){var e,i,l,h,p;if("array"===a.getType())if(c=a.getProperties(),e=b.getAttribute("items"),p=b.getAttribute("additionalProperties"),"array"===d.typeOf(e)){i=0;for(l=c.length;i<l;++i)h=e[i]||p,!1!==h?h.validate(c[i],f,a,b,i):f.addError(a,b,"additionalProperties","Additional items are not allowed",h)}else{h=e||p;i=0;for(l=c.length;i<l;++i)h.validate(c[i],f,a,b,i)}}},optional:{type:"boolean",optional:!0,"default":!1,parser:function(a){return!!a.getValue()},validator:function(a,b,c,d){"undefined"===
a.getType()&&!b.getAttribute("optional")&&d.addError(a,b,"optional","Property is required",!1)},validationRequired:!0},additionalProperties:{type:[{$ref:"#"},"boolean"],optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"boolean"===a.getType()&&!1===a.getValue()?!1:a.getEnvironment().createEmptySchema()},validator:function(a,b,c,f){var e,i,l;if("object"===a.getType())for(l in c=b.getAttribute("additionalProperties"),
e=b.getAttribute("properties")||{},i=a.getProperties(),i)i[l]!==j[l]&&(i[l]&&!e[l])&&(d.isJSONSchema(c)?c.validate(i[l],f,a,b,l):!1===c&&f.addError(a,b,"additionalProperties","Additional properties are not allowed",c))}},requires:{type:["string",{$ref:"#"}],optional:!0,parser:function(a,b){if("string"===a.getType())return a.getValue();if("object"===a.getType())return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))},validator:function(a,b,c,f,e){"undefined"!==a.getType()&&
(e&&"undefined"!==e.getType())&&(c=b.getAttribute("requires"),"string"===typeof c?"undefined"===e.getProperty(c).getType()&&f.addError(a,b,"requires",'Property requires sibling property "'+c+'"',c):d.isJSONSchema(c)&&c.validate(e,f))}},minimum:{type:"number",optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("minimum"),e=b.getAttribute("minimumCanEqual"),"number"===typeof c&&(a.getValue()<c||!1===
e&&a.getValue()===c)&&d.addError(a,b,"minimum","Number is less than the required minimum value",c))}},maximum:{type:"number",optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("maximum"),e=b.getAttribute("maximumCanEqual"),"number"===typeof c&&(a.getValue()>c||!1===e&&a.getValue()===c)&&d.addError(a,b,"maximum","Number is greater than the required maximum value",c))}},minimumCanEqual:{type:"boolean",
optional:!0,requires:"minimum","default":!0,parser:function(a){return"boolean"===a.getType()?a.getValue():!0}},maximumCanEqual:{type:"boolean",optional:!0,requires:"maximum","default":!0,parser:function(a){return"boolean"===a.getType()?a.getValue():!0}},minItems:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){"array"===a.getType()&&(c=b.getAttribute("minItems"),"number"===typeof c&&a.getProperties().length<
c&&d.addError(a,b,"minItems","The number of items is less than the required minimum",c))}},maxItems:{type:"integer",optional:!0,minimum:0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){"array"===a.getType()&&(c=b.getAttribute("maxItems"),"number"===typeof c&&a.getProperties().length>c&&d.addError(a,b,"maxItems","The number of items is greater than the required maximum",c))}},uniqueItems:{type:"boolean",optional:!0,"default":!1,parser:function(a){return!!a.getValue()},
validator:function(a,b,c,d){var e,i,l,h;if("array"===a.getType()&&b.getAttribute("uniqueItems")){c=a.getProperties();e=0;for(i=c.length-1;e<i;++e){l=e+1;for(h=c.length;l<h;++l)c[e].equals(c[l])&&d.addError(a,b,"uniqueItems","Array can only contain unique items",{x:e,y:l})}}}},pattern:{type:"string",optional:!0,format:"regex",parser:function(a){if("string"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;try{e=RegExp(b.getAttribute("pattern")),"string"===a.getType()&&(e&&!e.test(a.getValue()))&&
d.addError(a,b,"pattern","String does not match pattern",e.toString())}catch(i){d.addError(a,b,"pattern","Invalid pattern",i)}}},minLength:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){"string"===a.getType()&&(c=b.getAttribute("minLength"),"number"===typeof c&&a.getValue().length<c&&d.addError(a,b,"minLength","String is less than the required minimum length",c))}},maxLength:{type:"integer",optional:!0,
parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){"string"===a.getType()&&(c=b.getAttribute("maxLength"),"number"===typeof c&&a.getValue().length>c&&d.addError(a,b,"maxLength","String is greater than the required maximum length",c))}},"enum":{type:"array",optional:!0,minItems:1,uniqueItems:!0,parser:function(a){if("array"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e,i;if("undefined"!==a.getType()&&(c=b.getAttribute("enum"))){e=0;
for(i=c.length;e<i;++e)if(a.equals(c[e]))return!0;d.addError(a,b,"enum","Instance is not one of the possible values",c)}}},title:{type:"string",optional:!0},description:{type:"string",optional:!0},format:{type:"string",optional:!0,parser:function(a){if("string"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"string"===a.getType()&&(e=b.getAttribute("format"),c=c.getValueOfProperty("formatValidators"),"string"===typeof e&&(c[e]!==j[e]&&"function"===typeof c[e]&&!c[e].call(this,
a,d))&&d.addError(a,b,"format","String is not in the required format",e))},formatValidators:{}},contentEncoding:{type:"string",optional:!0},"default":{type:"any",optional:!0},divisibleBy:{type:"number",minimum:0,minimumCanEqual:!1,optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){"number"===a.getType()&&(c=b.getAttribute("divisibleBy"),0===c?d.addError(a,b,"divisibleBy","Nothing is divisible by 0",c):1!==c&&0!==a.getValue()/c%1&&d.addError(a,
b,"divisibleBy","Number is not divisible by "+c,c))}},disallow:{type:["string","array"],items:{type:"string"},optional:!0,uniqueItems:!0,parser:function(a){if("string"===a.getType()||"array"===a.getType())return a.getValue()},validator:function(a,b,c,g){var e=d.toArray(b.getAttribute("disallow")),i,l,h;if("undefined"!==a.getType()&&e&&e.length){h=c.getValueOfProperty("typeValidators")||{};c=0;for(i=e.length;c<i;++c)if(l=e[c],h[l]!==j[l]&&"function"===typeof h[l]&&h[l](a,g))return g.addError(a,b,"disallow",
"Instance is a disallowed type",e),!1}return!0},typeValidators:k},"extends":{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,b){if("object"===a.getType())return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")));if("array"===a.getType())return d.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))})},validator:function(a,b,c,g,e,i,l){var b=b.getAttribute("extends"),
h;if(b)if(d.isJSONSchema(b))b.validate(a,g,e,i,l);else if("array"===d.typeOf(b)){c=0;for(h=b.length;c<h;++c)b[c].validate(a,g,e,i,l)}}}},optional:!0,"default":{},fragmentResolution:"slash-delimited",parser:function(a,b){if("object"===a.getType())return a.getEnvironment().createSchema(a,b)},validator:function(a,b,c,g,e,i,l){var h=b.getPropertyNames(),p,m=c.getAttribute("properties"),t;for(p in m)m[p]!==j[p]&&m[p].getValueOfProperty("validationRequired")&&d.pushUnique(h,p);p=0;for(c=h.length;p<c;++p)m[h[p]]!==
j[h[p]]&&(t=m[h[p]].getValueOfProperty("validator"),"function"===typeof t&&t(a,b,m[h[p]],g,e,i,l))},initializer:function(a){var b;(b=a._schema.getLink("describedby",a))&&a._schema._uri!==b&&a.setReference("describedby",b);b=a._schema.getLink("self",a);"string"===d.typeOf(b)&&(a._uri=d.formatURI(b));(b=a._schema.getLink("full",a))&&a._uri!==b&&a.setReference("full",b);b=a.getAttribute("extends");d.isJSONSchema(b)&&(b=d.inherits(b,a,!0),a=a._env.createSchema(b,a._schema,a._uri));return a}},!0,"http://json-schema.org/schema#");
k=g.createSchema(d.inherits(k,g.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/hyper-schema#",properties:{links:{type:"array",items:{$ref:"links#"},optional:!0,parser:function(a,b,c){var g=b.getValueOfProperty("items").$ref,e=b.getEnvironment().findSchema(g),i=e&&e.getValueOfProperty("parser"),c=d.toArray(c),a="function"===typeof i?d.mapArray(a.getProperties(),function(a){return i(a,e)}):d.toArray(a.getValue());c[0]&&(a=d.filterArray(a,function(a){return a.rel===
c[0]}));c[1]&&(a=d.mapArray(a,function(a){var i=c[1],a=a.href;return(a=a.replace(/\{(.+)\}/g,function(a,b){var c;c="-this"===b?i.getValue():i.getValueOfProperty(b);return void 0!==c?String(c):""}))?d.formatURI(i.resolveURI(a)):a}));return a}},fragmentResolution:{type:"string",optional:!0,"default":"slash-delimited"},root:{type:"boolean",optional:!0,"default":!1},readonly:{type:"boolean",optional:!0,"default":!1},pathStart:{type:"string",optional:!0,format:"uri",validator:function(a,b,c,d){"undefined"!==
a.getType()&&(c=b.getAttribute("pathStart"),"string"===typeof c&&0!==a.getURI().indexOf(c)&&d.addError(a,b,"pathStart","Instance's URI does not start with "+c,c))}},mediaType:{type:"string",optional:!0,format:"media-type"},alternate:{type:"array",items:{$ref:"#"},optional:!0}},links:[{href:"{$ref}",rel:"full"},{href:"{$schema}",rel:"describedby"},{href:"{id}",rel:"self"}]},k),!0),!0,"http://json-schema.org/hyper-schema#");g.setOption("defaultSchemaURI","http://json-schema.org/hyper-schema#");g.createSchema({$schema:"http://json-schema.org/hyper-schema#",
id:"http://json-schema.org/links#",type:"object",properties:{href:{type:"string"},rel:{type:"string"},targetSchema:{$ref:"hyper-schema#",parser:k.getAttribute("parser")},method:{type:"string","default":"GET",optional:!0},enctype:{type:"string",requires:"method",optional:!0},properties:{type:"object",additionalProperties:{$ref:"hyper-schema#"},optional:!0,parser:function(a,b,c){var g=a.getEnvironment(),e=b.getEnvironment(),i=b.getValueOfProperty("additionalProperties").$ref;if("object"===a.getType())return c?
g.createSchema(a.getProperty(c),e.findSchema(b.resolveURI(i))):d.mapObject(a.getProperties(),function(a){return g.createSchema(a,e.findSchema(b.resolveURI(i)))})}}},parser:function(a,b){var c=b.getProperty("properties");return"object"===a.getType()?d.mapObject(a.getProperties(),function(a,b){var i=c.getProperty(b),l=i&&i.getValueOfProperty("parser");return"function"===typeof l?l(a,i):a.getValue()}):a.getValue()}},k,"http://json-schema.org/links#");d.registerEnvironment("json-schema-draft-02",g);(!d.getDefaultEnvironmentID()||
"json-schema-draft-01"===d.getDefaultEnvironmentID())&&d.setDefaultEnvironmentID("json-schema-draft-02")},"json-schema-draft-03":function(q,u){var j=function(a,b,h,c){var e={},t,f,n,j;if("object"===a.getType())for(f in t=b.getAttribute("patternProperties"),n=a.getProperties(),t)if(t[f]!==d[f]){a=null;try{a=RegExp(f)}catch(k){h&&h.addError(b,c,"patternProperties","Invalid pattern",f)}if(a)for(j in n)n[j]!==d[j]&&a.test(j)&&(e[j]=e[j]?g.pushUnique(e[j],t[f]):[t[f]])}return e},d={},g=u("./jsv").JSV,
k,a,b,c,f,e;k={string:function(a){return"string"===a.getType()},number:function(a){return"number"===a.getType()},integer:function(a){return"number"===a.getType()&&0===a.getValue()%1},"boolean":function(a){return"boolean"===a.getType()},object:function(a){return"object"===a.getType()},array:function(a){return"array"===a.getType()},"null":function(a){return"null"===a.getType()},any:function(){return!0}};a=new g.Environment;a.setOption("validateReferences",!0);a.setOption("enforceReferences",!1);a.setOption("strict",
!1);b={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/schema#",type:"object",properties:{type:{type:["string","array"],items:{type:["string",{$ref:"#"}]},optional:!0,uniqueItems:!0,"default":"any",parser:function(a,b){var h;return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?(h=b.getValueOfProperty("parser"),g.mapArray(a.getProperties(),
function(a){return h(a,b)})):"any"},validator:function(a,b,h,c,e,t,f){var n=g.toArray(b.getAttribute("type")),j,k,s,q;if("undefined"!==a.getType()&&n&&n.length){q=h.getValueOfProperty("typeValidators")||{};h=0;for(j=n.length;h<j;++h)if(k=n[h],g.isJSONSchema(k)){if(s=g.createObject(c),s.errors=[],s.validated=g.clone(c.validated),0===k.validate(a,s,e,t,f).errors.length)return!0}else if(q[k]!==d[k]&&"function"===typeof q[k]){if(q[k](a,c))return!0}else return!0;c.addError(a,b,"type","Instance is not a required type",
n);return!1}return!0},typeValidators:k},properties:{type:"object",additionalProperties:{$ref:"#"},optional:!0,"default":{},parser:function(a,b,h){var c=a.getEnvironment(),d=b.getEnvironment();return"object"===a.getType()?h?c.createSchema(a.getProperty(h),d.findSchema(b.resolveURI("#"))):g.mapObject(a.getProperties(),function(a){return c.createSchema(a,d.findSchema(b.resolveURI("#")))}):{}},validator:function(a,b,h,c){var e;if("object"===a.getType())for(e in h=b.getAttribute("properties"),h)h[e]!==
d[e]&&h[e]&&h[e].validate(a.getProperty(e),c,a,b,e)}},items:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?g.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):a.getEnvironment().createEmptySchema()},validator:function(a,b,h,c){var d,e,f,n,j;
if("array"===a.getType())if(h=a.getProperties(),d=b.getAttribute("items"),j=b.getAttribute("additionalProperties"),"array"===g.typeOf(d)){e=0;for(f=h.length;e<f;++e)n=d[e]||j,!1!==n?n.validate(h[e],c,a,b,e):c.addError(a,b,"additionalProperties","Additional items are not allowed",n)}else{n=d||j;e=0;for(f=h.length;e<f;++e)n.validate(h[e],c,a,b,e)}}},optional:{type:"boolean",optional:!0,"default":!1,parser:function(a){return!!a.getValue()},validator:function(a,b,c,d){"undefined"===a.getType()&&!b.getAttribute("optional")&&
d.addError(a,b,"optional","Property is required",!1)},validationRequired:!0},additionalProperties:{type:[{$ref:"#"},"boolean"],optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"boolean"===a.getType()&&!1===a.getValue()?!1:a.getEnvironment().createEmptySchema()},validator:function(a,b,c,e){var m,t,f;if("object"===a.getType())for(f in c=b.getAttribute("additionalProperties"),m=b.getAttribute("properties")||
{},t=a.getProperties(),t)t[f]!==d[f]&&(t[f]&&m[f]===d[f])&&(g.isJSONSchema(c)?c.validate(t[f],e,a,b,f):!1===c&&e.addError(a,b,"additionalProperties","Additional properties are not allowed",c))}},requires:{type:["string",{$ref:"#"}],optional:!0,parser:function(a,b){if("string"===a.getType())return a.getValue();if("object"===a.getType())return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))},validator:function(a,b,c,d,e){"undefined"!==a.getType()&&(e&&"undefined"!==
e.getType())&&(c=b.getAttribute("requires"),"string"===typeof c?"undefined"===e.getProperty(c).getType()&&d.addError(a,b,"requires",'Property requires sibling property "'+c+'"',c):g.isJSONSchema(c)&&c.validate(e,d))}},minimum:{type:"number",optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("minimum"),e=b.getAttribute("minimumCanEqual"),"number"===typeof c&&(a.getValue()<c||!1===e&&a.getValue()===
c)&&d.addError(a,b,"minimum","Number is less than the required minimum value",c))}},maximum:{type:"number",optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("maximum"),e=b.getAttribute("maximumCanEqual"),"number"===typeof c&&(a.getValue()>c||!1===e&&a.getValue()===c)&&d.addError(a,b,"maximum","Number is greater than the required maximum value",c))}},minimumCanEqual:{type:"boolean",optional:!0,requires:"minimum",
"default":!0,parser:function(a){return"boolean"===a.getType()?a.getValue():!0}},maximumCanEqual:{type:"boolean",optional:!0,requires:"maximum","default":!0,parser:function(a){return"boolean"===a.getType()?a.getValue():!0}},minItems:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){"array"===a.getType()&&(c=b.getAttribute("minItems"),"number"===typeof c&&a.getProperties().length<c&&d.addError(a,b,"minItems",
"The number of items is less than the required minimum",c))}},maxItems:{type:"integer",optional:!0,minimum:0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){"array"===a.getType()&&(c=b.getAttribute("maxItems"),"number"===typeof c&&a.getProperties().length>c&&d.addError(a,b,"maxItems","The number of items is greater than the required maximum",c))}},pattern:{type:"string",optional:!0,format:"regex",parser:function(a){if("string"===a.getType())return a.getValue()},
validator:function(a,b,c,d){var e;try{e=RegExp(b.getAttribute("pattern")),"string"===a.getType()&&(e&&!e.test(a.getValue()))&&d.addError(a,b,"pattern","String does not match pattern",e.toString())}catch(g){d.addError(b,c,"pattern","Invalid pattern",b.getValueOfProperty("pattern"))}}},minLength:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){"string"===a.getType()&&(c=b.getAttribute("minLength"),"number"===
typeof c&&a.getValue().length<c&&d.addError(a,b,"minLength","String is less than the required minimum length",c))}},maxLength:{type:"integer",optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){"string"===a.getType()&&(c=b.getAttribute("maxLength"),"number"===typeof c&&a.getValue().length>c&&d.addError(a,b,"maxLength","String is greater than the required maximum length",c))}},"enum":{type:"array",optional:!0,minItems:1,uniqueItems:!0,parser:function(a){if("array"===
a.getType())return a.getValue()},validator:function(a,b,c,d){var e,g;if("undefined"!==a.getType()&&(c=b.getAttribute("enum"))){e=0;for(g=c.length;e<g;++e)if(a.equals(c[e]))return!0;d.addError(a,b,"enum","Instance is not one of the possible values",c)}}},title:{type:"string",optional:!0},description:{type:"string",optional:!0},format:{type:"string",optional:!0,parser:function(a){if("string"===a.getType())return a.getValue()},validator:function(a,b,c,e){var m;"string"===a.getType()&&(m=b.getAttribute("format"),
c=c.getValueOfProperty("formatValidators"),"string"===typeof m&&(c[m]!==d[m]&&"function"===typeof c[m]&&!c[m].call(this,a,e))&&e.addError(a,b,"format","String is not in the required format",m))},formatValidators:{}},contentEncoding:{type:"string",optional:!0},"default":{type:"any",optional:!0},maxDecimal:{type:"integer",optional:!0,minimum:0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("maxDecimal"),"number"===
typeof c&&(e=a.getValue().toString(10).split(".")[1])&&e.length>c&&d.addError(a,b,"maxDecimal","The number of decimal places is greater than the allowed maximum",c))}},disallow:{type:["string","array"],items:{type:"string"},optional:!0,uniqueItems:!0,parser:function(a){if("string"===a.getType()||"array"===a.getType())return a.getValue()},validator:function(a,b,c,e,m,t,f){var n=g.toArray(b.getAttribute("disallow")),j,k,s,q;if("undefined"!==a.getType()&&n&&n.length){s=c.getValueOfProperty("typeValidators")||
{};c=0;for(j=n.length;c<j;++c)if(k=n[c],g.isJSONSchema(k)){if(q=g.createObject(e),q.errors=[],q.validated=g.clone(e.validated),0===k.validate(a,q,m,t,f).errors.length)return e.addError(a,b,"disallow","Instance is a disallowed type",n),!1}else if(s[k]!==d[k]&&"function"===typeof s[k]&&s[k](a,e))return e.addError(a,b,"disallow","Instance is a disallowed type",n),!1}return!0},typeValidators:k},"extends":{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,b){if("object"===
a.getType())return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")));if("array"===a.getType())return g.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))})},validator:function(a,b,c,d,e,f,j){var b=b.getAttribute("extends"),n;if(b)if(g.isJSONSchema(b))b.validate(a,d,e,f,j);else if("array"===g.typeOf(b)){c=0;for(n=b.length;c<n;++c)b[c].validate(a,d,e,f,j)}}}},optional:!0,"default":{},fragmentResolution:"dot-delimited",
parser:function(a,b){if("object"===a.getType())return a.getEnvironment().createSchema(a,b)},validator:function(a,b,c,e,m,f,j){var n=b.getPropertyNames(),k,q,c=c.getAttribute("properties");q=a.getEnvironment().getOption("strict");var s;for(k in c)c[k]!==d[k]&&(c[k].getValueOfProperty("validationRequired")&&g.pushUnique(n,k),q&&c[k].getValueOfProperty("deprecated")&&g.popFirst(n,k));k=0;for(q=n.length;k<q;++k)c[n[k]]!==d[n[k]]&&(s=c[n[k]].getValueOfProperty("validator"),"function"===typeof s&&s(a,b,
c[n[k]],e,m,f,j))}};c={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/hyper-schema#",properties:{links:{type:"array",items:{$ref:"links#"},optional:!0,parser:function(a,b,c){var d=b.getValueOfProperty("items").$ref,e=b.getEnvironment().findSchema(d),f=e&&e.getValueOfProperty("parser"),j,c=g.toArray(c),a="function"===typeof f?g.mapArray(a.getProperties(),function(a){return f(a,e)}):g.toArray(a.getValue());c[0]&&(a=g.filterArray(a,function(a){return a.rel===
c[0]}));c[1]&&(j=b.getValueOfProperty("selfReferenceVariable"),a=g.mapArray(a,function(a){var b=c[1],a=a.href;return(a=a.replace(/\{(.+)\}/g,function(a,c){var d;d=c===j?b.getValue():b.getValueOfProperty(c);return void 0!==d?String(d):""}))?g.formatURI(b.resolveURI(a)):a}));return a},selfReferenceVariable:"-this"},fragmentResolution:{type:"string",optional:!0,"default":"dot-delimited"},root:{type:"boolean",optional:!0,"default":!1},readonly:{type:"boolean",optional:!0,"default":!1},pathStart:{type:"string",
optional:!0,format:"uri",validator:function(a,b,c,d){"undefined"!==a.getType()&&(c=b.getAttribute("pathStart"),"string"===typeof c&&0!==a.getURI().indexOf(c)&&d.addError(a,b,"pathStart","Instance's URI does not start with "+c,c))}},mediaType:{type:"string",optional:!0,format:"media-type"},alternate:{type:"array",items:{$ref:"#"},optional:!0}},links:[{href:"{$ref}",rel:"full"},{href:"{$schema}",rel:"describedby"},{href:"{id}",rel:"self"}],initializer:function(a){var b;(b=a._schema.getLink("describedby",
a))&&a._schema._uri!==b&&a.setReference("describedby",b);b=a._schema.getLink("self",a);"string"===g.typeOf(b)&&(a._uri=g.formatURI(b));(b=a._schema.getLink("full",a))&&a._uri!==b&&a.setReference("full",b);b=a.getAttribute("extends");g.isJSONSchema(b)&&(b=g.inherits(b,a,!0),a=a._env.createSchema(b,a._schema,a._uri));return a}};k={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/links#",type:"object",properties:{href:{type:"string"},rel:{type:"string"},method:{type:"string",
"default":"GET",optional:!0},enctype:{type:"string",requires:"method",optional:!0},properties:{type:"object",additionalProperties:{$ref:"hyper-schema#"},optional:!0,parser:function(a,b,c){var d=a.getEnvironment(),e=b.getEnvironment(),f=b.getValueOfProperty("additionalProperties").$ref;if("object"===a.getType())return c?d.createSchema(a.getProperty(c),e.findSchema(b.resolveURI(f))):g.mapObject(a.getProperties(),function(a){return d.createSchema(a,e.findSchema(b.resolveURI(f)))})}}},parser:function(a,
b){var c=b.getProperty("properties");return"object"===a.getType()?g.mapObject(a.getProperties(),function(a,b){var d=c.getProperty(b),e=d&&d.getValueOfProperty("parser");return"function"===typeof e?e(a,d):a.getValue()}):a.getValue()}};a.setOption("defaultFragmentDelimiter",".");a.setOption("defaultSchemaURI","http://json-schema.org/draft-00/schema#");f=a.createSchema(b,!0,"http://json-schema.org/draft-00/schema#");f=a.createSchema(g.inherits(f,a.createSchema(c,!0,"http://json-schema.org/draft-00/hyper-schema#"),
!0),!0,"http://json-schema.org/draft-00/hyper-schema#");a.setOption("defaultSchemaURI","http://json-schema.org/draft-00/hyper-schema#");a.createSchema(k,f,"http://json-schema.org/draft-00/links#");b=g.inherits(b,{$schema:"http://json-schema.org/draft-01/hyper-schema#",id:"http://json-schema.org/draft-01/schema#"});c=g.inherits(c,{$schema:"http://json-schema.org/draft-01/hyper-schema#",id:"http://json-schema.org/draft-01/hyper-schema#"});f=g.inherits(k,{$schema:"http://json-schema.org/draft-01/hyper-schema#",
id:"http://json-schema.org/draft-01/links#"});a.setOption("defaultSchemaURI","http://json-schema.org/draft-01/schema#");k=a.createSchema(b,!0,"http://json-schema.org/draft-01/schema#");e=a.createSchema(g.inherits(k,a.createSchema(c,!0,"http://json-schema.org/draft-01/hyper-schema#"),!0),!0,"http://json-schema.org/draft-01/hyper-schema#");a.setOption("defaultSchemaURI","http://json-schema.org/draft-01/hyper-schema#");a.createSchema(f,e,"http://json-schema.org/draft-01/links#");k=g.inherits(b,{$schema:"http://json-schema.org/draft-02/hyper-schema#",
id:"http://json-schema.org/draft-02/schema#",properties:{uniqueItems:{type:"boolean",optional:!0,"default":!1,parser:function(a){return!!a.getValue()},validator:function(a,b,c,d){var e,g,f,j;if("array"===a.getType()&&b.getAttribute("uniqueItems")){c=a.getProperties();e=0;for(g=c.length-1;e<g;++e){f=e+1;for(j=c.length;f<j;++f)c[e].equals(c[f])&&d.addError(a,b,"uniqueItems","Array can only contain unique items",{x:e,y:f})}}}},maxDecimal:{deprecated:!0},divisibleBy:{type:"number",minimum:0,minimumCanEqual:!1,
optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e,g;"number"===a.getType()&&(c=b.getAttribute("divisibleBy"),0===c?d.addError(a,b,"divisibleBy","Nothing is divisible by 0",c):1!==c&&(e=a.getValue(),g=Math.max((e.toString().split(".")[1]||" ").length,(c.toString().split(".")[1]||" ").length),g=parseFloat((e/c%1).toFixed(g)),0<g&&1>g&&d.addError(a,b,"divisibleBy","Number is not divisible by "+c,c)))}}},fragmentResolution:"slash-delimited"});
b=g.inherits(c,{id:"http://json-schema.org/draft-02/hyper-schema#",properties:{fragmentResolution:{"default":"slash-delimited"}}});c=g.inherits(f,{$schema:"http://json-schema.org/draft-02/hyper-schema#",id:"http://json-schema.org/draft-02/links#",properties:{targetSchema:{$ref:"hyper-schema#",parser:e.getAttribute("parser")}}});a.setOption("defaultFragmentDelimiter","/");a.setOption("defaultSchemaURI","http://json-schema.org/draft-02/schema#");f=a.createSchema(k,!0,"http://json-schema.org/draft-02/schema#");
e=a.createSchema(g.inherits(f,a.createSchema(b,!0,"http://json-schema.org/draft-02/hyper-schema#"),!0),!0,"http://json-schema.org/draft-02/hyper-schema#");a.setOption("defaultSchemaURI","http://json-schema.org/draft-02/hyper-schema#");a.createSchema(c,e,"http://json-schema.org/draft-02/links#");k=g.inherits(k,{$schema:"http://json-schema.org/draft-03/schema#",id:"http://json-schema.org/draft-03/schema#",properties:{patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{},parser:f.getValueOfProperty("properties").properties.parser,
validator:function(a,b,c,e){var g,f;if("object"===a.getType())for(g in c=j(a,b,e,c),c)if(c[g]!==d[g])for(f=c[g].length;f--;)c[g][f].validate(a.getProperty(g),e,a,b,g)}},additionalProperties:{validator:function(a,b,c,e){var f,k,q,n;if("object"===a.getType())for(n in c=b.getAttribute("additionalProperties"),f=b.getAttribute("properties")||{},k=a.getProperties(),q=j(a,b),k)k[n]!==d[n]&&(k[n]&&f[n]===d[n]&&q[n]===d[n])&&(g.isJSONSchema(c)?c.validate(k[n],e,a,b,n):!1===c&&e.addError(a,b,"additionalProperties",
"Additional properties are not allowed",c))}},items:{validator:function(a,b,c,d){var e,f,j,k,q;if("array"===a.getType())if(c=a.getProperties(),e=b.getAttribute("items"),q=b.getAttribute("additionalItems"),"array"===g.typeOf(e)){f=0;for(j=c.length;f<j;++f)k=e[f]||q,!1!==k?k.validate(c[f],d,a,b,f):d.addError(a,b,"additionalItems","Additional items are not allowed",k)}else{k=e||q;f=0;for(j=c.length;f<j;++f)k.validate(c[f],d,a,b,f)}}},additionalItems:{type:[{$ref:"#"},"boolean"],"default":{},parser:f.getValueOfProperty("properties").additionalProperties.parser,
validator:function(a,b,c,d){var e,g,f;if("array"===a.getType()&&"undefined"===b.getProperty("items").getType())if(c=b.getAttribute("additionalItems"),e=a.getProperties(),!1!==c){g=0;for(f=e.length;g<f;++g)c.validate(e[g],d,a,b,g)}else e.length&&d.addError(a,b,"additionalItems","Additional items are not allowed",c)}},optional:{validationRequired:!1,deprecated:!0},required:{type:"boolean","default":!1,parser:function(a){return!!a.getValue()},validator:function(a,b,c,d){"undefined"===a.getType()&&b.getAttribute("required")&&
d.addError(a,b,"required","Property is required",!0)}},requires:{deprecated:!0},dependencies:{type:"object",additionalProperties:{type:["string","array",{$ref:"#"}],items:{type:"string"}},"default":{},parser:function(a,b,c){function d(a){var c=a.getType();if("string"===c||"array"===c)return a.getValue();if("object"===c)return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}return"object"===a.getType()?c?d(a.getProperty(c)):g.mapObject(a.getProperties(),d):{}},validator:function(a,
b,c,e){var f,j,k,n;if("object"===a.getType())for(f in c=b.getAttribute("dependencies"),c)if(c[f]!==d[f]&&"undefined"!==a.getProperty(f).getType())if(j=c[f],k=g.typeOf(j),"string"===k)"undefined"===a.getProperty(j).getType()&&e.addError(a,b,"dependencies",'Property "'+f+'" requires sibling property "'+j+'"',c);else if("array"===k){k=0;for(n=j.length;k<n;++k)"undefined"===a.getProperty(j[k]).getType()&&e.addError(a,b,"dependencies",'Property "'+f+'" requires sibling property "'+j[k]+'"',c)}else g.isJSONSchema(j)&&
j.validate(a,e)}},minimumCanEqual:{deprecated:!0},maximumCanEqual:{deprecated:!0},exclusiveMinimum:{type:"boolean","default":!1,parser:function(a){return!!a.getValue()}},exclusiveMaximum:{type:"boolean","default":!1,parser:function(a){return!!a.getValue()}},minimum:{validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("minimum"),e=b.getAttribute("exclusiveMinimum")||!a.getEnvironment().getOption("strict")&&!b.getAttribute("minimumCanEqual"),"number"===typeof c&&(a.getValue()<
c||!0===e&&a.getValue()===c)&&d.addError(a,b,"minimum","Number is less than the required minimum value",c))}},maximum:{validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("maximum"),e=b.getAttribute("exclusiveMaximum")||!a.getEnvironment().getOption("strict")&&!b.getAttribute("maximumCanEqual"),"number"===typeof c&&(a.getValue()>c||!0===e&&a.getValue()===c)&&d.addError(a,b,"maximum","Number is greater than the required maximum value",c))}},contentEncoding:{deprecated:!0},divisibleBy:{exclusiveMinimum:!0},
disallow:{items:{type:["string",{$ref:"#"}]},parser:k.properties.type.parser},id:{type:"string",format:"uri"},$ref:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"}},dependencies:{exclusiveMinimum:"minimum",exclusiveMaximum:"maximum"},initializer:function(a){var b,c;b=a.getValueOfProperty("$schema");c=a.getValueOfProperty("$ref");var d=a.getValueOfProperty("id");b&&(b=a.resolveURI(b),a.setReference("describedby",b));d&&(b=a.resolveURI(d),"string"===g.typeOf(b)&&(a._uri=g.formatURI(b)));
c&&(b=a.resolveURI(c),a.setReference("full",b));c=a.getAttribute("extends");g.isJSONSchema(c)&&(c=g.inherits(c,a,!0),a=a._env.createSchema(c,a._schema,a._uri));return a}});b=g.inherits(b,{$schema:"http://json-schema.org/draft-03/hyper-schema#",id:"http://json-schema.org/draft-03/hyper-schema#",properties:{links:{selfReferenceVariable:"@"},root:{deprecated:!0},contentEncoding:{deprecated:!1},alternate:{deprecated:!0}}});c=g.inherits(c,{$schema:"http://json-schema.org/draft-03/hyper-schema#",id:"http://json-schema.org/draft-03/links#",
properties:{href:{required:!0,format:"link-description-object-template"},rel:{required:!0},properties:{deprecated:!0},schema:{$ref:"http://json-schema.org/draft-03/hyper-schema#"}}});a.setOption("defaultSchemaURI","http://json-schema.org/draft-03/schema#");k=a.createSchema(k,!0,"http://json-schema.org/draft-03/schema#");b=a.createSchema(g.inherits(k,a.createSchema(b,!0,"http://json-schema.org/draft-03/hyper-schema#"),!0),!0,"http://json-schema.org/draft-03/hyper-schema#");a.setOption("defaultSchemaURI",
"http://json-schema.org/draft-03/hyper-schema#");c=a.createSchema(c,!0,"http://json-schema.org/draft-03/links#");a.setOption("latestJSONSchemaSchemaURI","http://json-schema.org/draft-03/schema#");a.setOption("latestJSONSchemaHyperSchemaURI","http://json-schema.org/draft-03/hyper-schema#");a.setOption("latestJSONSchemaLinksURI","http://json-schema.org/draft-03/links#");a._schemas["http://json-schema.org/schema#"]=k;a._schemas["http://json-schema.org/hyper-schema#"]=b;a._schemas["http://json-schema.org/links#"]=
c;g.registerEnvironment("json-schema-draft-03",a);(!g.getDefaultEnvironmentID()||"json-schema-draft-01"===g.getDefaultEnvironmentID()||"json-schema-draft-02"===g.getDefaultEnvironmentID())&&g.setDefaultEnvironmentID("json-schema-draft-03")},jsv:function(q,u){q=q||this;u=u||function(){return q};(function(){function j(a){return void 0===a?"undefined":null===a?"null":Object.prototype.toString.call(a).split(" ").pop().split("]").shift().toLowerCase()}function d(){}function g(a){d.prototype=a||{};return new d}
function k(a,b,c){var d={},e;for(e in a)a[e]!==v[e]&&(d[e]=b.call(c,a[e],e,a));return d}function a(a){var b=[],c;switch(j(a)){case "object":for(c in a)a[c]!==v[c]&&(b[b.length]=c);break;case "array":for(c=a.length-1;0<=c;--c)b[c]=c}return b}function b(){return[s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*
Math.random())],"-",s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],"-4",s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],"-",s[Math.floor(16*Math.random())&3|8],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],"-",s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*
Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())],s[Math.floor(16*Math.random())]].join("")}function c(a){return encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function f(a){"string"===typeof a&&-1===a.indexOf("#")&&(a+="#");return a}
function e(a){if(a instanceof h)return a.getURI();switch(j(a)){case "undefined":case "null":case "boolean":case "number":case "string":return a;case "object":return k(a,e);case "array":return z(a,e);default:return a.toString()}}function i(a,b,c,d,e){Error.call(this,d);this.uri=a instanceof h?a.getURI():a;this.schemaUri=b instanceof h?b.getURI():b;this.attribute=c;this.description=this.message=d;this.details=e}function l(){this.errors=[];this.validated={}}function h(a,c,d,e){c instanceof h&&("string"!==
typeof e&&(e=c._fd),"string"!==typeof d&&(d=c._uri),c=c._value);"string"!==typeof d?d="urn:uuid:"+b()+"#":-1===d.indexOf(":")&&(d=f(C.resolve("urn:uuid:"+b()+"#",d)));this._env=a;this._value=c;this._uri=d;this._fd=e||this._env._options.defaultFragmentDelimiter}function p(a,b){var c,d;a instanceof h&&(a=a.getValue());switch(j(a)){case "object":if(b){c={};for(d in a)a[d]!==v[d]&&(c[d]=p(a[d],b));return c}return g(a);case "array":if(b){c=Array(a.length);for(d=a.length;0<=--d;)c[d]=p(a[d],b);return c}return Array.prototype.slice.call(a);
default:return a}}function m(a,b,c,d){h.call(this,a,b,c);this._schema=!0===d?this:b instanceof m&&!(d instanceof m)?b._schema:d instanceof m?d:this._env.getDefaultSchema()||this._env.createEmptySchema();a=this._schema.getValueOfProperty("fragmentResolution");"dot-delimited"===a?this._fd=".":"slash-delimited"===a&&(this._fd="/");return this.rebuild()}function t(a){return function(){for(var b=this,c=[],d=b._refs&&b._refs.full,e;d;)if(e=b._env.findSchema(d)){if(e._value===b._value)break;b=e;c.push(d);
d=b._refs&&b._refs.full;if(-1<c.indexOf(d))break}else{if(b._env._options.enforceReferences)throw new i(b,b._schema,"{full}","Unknown schema reference",d);d=null}return a.apply(b,arguments)}}function w(a,b,c){var d=j(a),e=j(b),g;if("undefined"===e)return p(a,!0);if("undefined"===d||e!==d)return p(b,!0);if("object"===e){a instanceof m&&(a=a.getAttributes());b instanceof m&&(b=b.getAttributes(),b["extends"]&&(c&&b["extends"]instanceof m)&&(b["extends"]=[b["extends"]]));d=p(a,!0);for(g in b)b[g]!==v[g]&&
(d[g]=w(a[g],b[g],c));return d}return p(b,!0)}function n(){this._id=b();this._schemas={};this._options={};this.createSchema({},!0,"urn:jsv:empty-schema#")}var C=u("./uri/uri").URI,v={},s="0123456789abcdef".split(""),z,A,y;z=function(a,b,c){for(var d=0,e=a.length,g=Array(e);d<e;++d)g[d]=b.call(c,a[d],d,a);return g};Array.prototype.map&&(z=function(a,b,c){return Array.prototype.map.call(a,b,c)});A=function(a,b,c){for(var d=0,e=a.length,g=[];d<e;++d)b.call(c,a[d],d,a)&&(g[g.length]=a[d]);return g};Array.prototype.filter&&
(A=function(a,b,c){return Array.prototype.filter.call(a,b,c)});y=function(a,b){for(var c=0,d=a.length;c<d;++c)if(a[c]===b)return c;return-1};Array.prototype.indexOf&&(y=function(a,b){return Array.prototype.indexOf.call(a,b)});i.prototype=Error();i.prototype.constructor=i;i.prototype.name="InitializationError";l.prototype.addError=function(a,b,c,d,g){this.errors.push({uri:a instanceof h?a.getURI():a,schemaUri:b instanceof h?b.getURI():b,attribute:c,message:d,details:e(g)})};l.prototype.registerValidation=
function(a,b){this.validated[a]?this.validated[a].push(b):this.validated[a]=[b]};l.prototype.isValidatedBy=function(a,b){return!!this.validated[a]&&-1!==y(this.validated[a],b)};h.prototype.getEnvironment=function(){return this._env};h.prototype.getType=function(){return j(this._value)};h.prototype.getValue=function(){return this._value};h.prototype.getURI=function(){return this._uri};h.prototype.resolveURI=function(a){return f(C.resolve(this._uri,a))};h.prototype.getPropertyNames=function(){return a(this._value)};
h.prototype.getProperty=function(a){var b=this._value?this._value[a]:void 0;return b instanceof h?b:new h(this._env,b,this._uri+this._fd+c(a),this._fd)};h.prototype.getProperties=function(){var a=j(this._value),b=this;if("object"===a)return k(this._value,function(a,d){return a instanceof h?a:new h(b._env,a,b._uri+b._fd+c(d),b._fd)});if("array"===a)return z(this._value,function(a,d){return a instanceof h?a:new h(b._env,a,b._uri+b._fd+c(d),b._fd)})};h.prototype.getValueOfProperty=function(a){if(this._value)return this._value[a]instanceof
h?this._value[a]._value:this._value[a]};h.prototype.equals=function(a){return a instanceof h?this._value===a._value:this._value===a};m.prototype=g(h.prototype);m.prototype.getSchema=function(){var a=this._refs&&this._refs.describedby,b;if(a)if(b=a&&this._env.findSchema(a))b.equals(this._schema)||(this._schema=b,this.rebuild());else if(this._env._options.enforceReferences)throw new i(this,this._schema,"{describedby}","Unknown schema reference",a);return this._schema};m.prototype.getAttribute=function(a,
b){var c,d,e;c=this.getSchema();if(!b&&this._attributes&&this._attributes.hasOwnProperty(a))return this._attributes[a];c=c.getProperty("properties").getProperty(a);d=c.getValueOfProperty("parser");e=this.getProperty(a);return"function"===typeof d?(c=d(e,c,b),!b&&this._attributes&&(this._attributes[a]=c),c):e.getValue()};m.prototype.getAttributes=function(){var a,b,c,d,e;b=this.getSchema();if(!this._attributes&&"object"===this.getType())for(c in a=this.getProperties(),b=b.getProperty("properties"),
this._attributes={},a)a[c]!==v[c]&&(e=(d=b&&b.getProperty(c))&&d.getValueOfProperty("parser"),this._attributes[c]="function"===typeof e?e(a[c],d):a[c].getValue());return p(this._attributes,!1)};m.prototype.getLink=function(a,b){var c=this.getAttribute("links",[a,b]);if(c&&c.length&&c[c.length-1])return c[c.length-1]};m.prototype.validate=function(a,b,c,d,e){var g=this.getSchema(),f=g.getValueOfProperty("validator");a instanceof h||(a=this.getEnvironment().createInstance(a));b instanceof l||(b=new l);
this._env._options.validateReferences&&this._refs&&(this._refs.describedby&&!this._env.findSchema(this._refs.describedby)&&b.addError(this,this._schema,"{describedby}","Unknown schema reference",this._refs.describedby),this._refs.full&&!this._env.findSchema(this._refs.full)&&b.addError(this,this._schema,"{full}","Unknown schema reference",this._refs.full));"function"===typeof f&&!b.isValidatedBy(a.getURI(),this.getURI())&&(b.registerValidation(a.getURI(),this.getURI()),f(a,this,g,b,c,d,e));return b};
for(var B in m.prototype)m.prototype[B]!==v[B]&&"function"===j(m.prototype[B])&&(m.prototype[B]=t(m.prototype[B]));m.prototype.rebuild=function(){var a=this,b=a.getSchema().getValueOfProperty("initializer");a._refs=null;a._attributes=null;"function"===typeof b&&(a=b(a));a._env._schemas[a._uri]=a;a.getAttributes();return a};m.prototype.setReference=function(a,b){this._refs||(this._refs={});this._refs[a]=this.resolveURI(b)};m.prototype.getReference=function(a){return this._refs&&this._refs[a]};n.prototype.clone=
function(){var a=new n;a._schemas=g(this._schemas);a._options=g(this._options);return a};n.prototype.createInstance=function(a,b){b=f(b);return a instanceof h&&(!b||a.getURI()===b)?a:new h(this,a,b)};n.prototype.createSchema=function(a,b,c){c=f(c);return a instanceof m&&(!c||a._uri===c)&&(!b||a.getSchema().equals(b))?a:new m(this,a,c,b)};n.prototype.createEmptySchema=function(){return this._schemas["urn:jsv:empty-schema#"]};n.prototype.findSchema=function(a){return this._schemas[f(a)]};n.prototype.setOption=
function(a,b){this._options[a]=b};n.prototype.getOption=function(a){return this._options[a]};n.prototype.setDefaultFragmentDelimiter=function(a){"string"===typeof a&&0<a.length&&(this._options.defaultFragmentDelimiter=a)};n.prototype.getDefaultFragmentDelimiter=function(){return this._options.defaultFragmentDelimiter};n.prototype.setDefaultSchemaURI=function(a){"string"===typeof a&&(this._options.defaultSchemaURI=f(a))};n.prototype.getDefaultSchema=function(){return this.findSchema(this._options.defaultSchemaURI)};
n.prototype.validate=function(a,b){var c,d,e,g=new l;try{c=this.createInstance(a),g.instance=c}catch(f){g.addError(f.uri,f.schemaUri,f.attribute,f.message,f.details)}try{d=this.createSchema(b),g.schema=d,e=d.getSchema(),g.schemaSchema=e}catch(h){g.addError(h.uri,h.schemaUri,h.attribute,h.message,h.details)}e&&e.validate(d,g);return g.errors.length?g:d.validate(c,g)};n.prototype._checkForInvalidInstances=function(a,b){for(var d=[],e=[[b,this._schemas[b]]],g=0,f,h,i;g++<a&&e.length;)if(f=e.shift(),
h=f[0],f=f[1],f instanceof m)if(this._schemas[f._uri]!==f)d.push("Instance "+h+" does not match "+f._uri);else for(i in f=f.getAttributes(),f)f[i]!==v[i]&&e.push([h+"/"+c(i),f[i]]);else if("object"===j(f))for(i in f)f.hasOwnProperty(i)&&e.push([h+"/"+c(i),f[i]]);else if("array"===j(f))for(i=0;i<f.length;++i)e.push([h+"/"+c(i),f[i]]);return d.length?d:g};this.JSV=A={_environments:{},_defaultEnvironmentID:"",isJSONInstance:function(a){return a instanceof h},isJSONSchema:function(a){return a instanceof
m},createEnvironment:function(a){a=a||this._defaultEnvironmentID;if(!this._environments[a])throw Error("Unknown Environment ID");return this._environments[a].clone()},Environment:n,registerEnvironment:function(a,b){if((a=a||(b||0)._id)&&!this._environments[a]&&b instanceof n)b._id=a,this._environments[a]=b},setDefaultEnvironmentID:function(a){if("string"===typeof a){if(!this._environments[a])throw Error("Unknown Environment ID");this._defaultEnvironmentID=a}},getDefaultEnvironmentID:function(){return this._defaultEnvironmentID},
typeOf:j,createObject:g,mapObject:k,mapArray:z,filterArray:A,searchArray:y,toArray:function(a){return void 0!==a&&null!==a?a instanceof Array&&!a.callee?a:"number"!==typeof a.length||a.split||a.setInterval||a.call?[a]:Array.prototype.slice.call(a):[]},keys:a,pushUnique:function(a,b){-1===y(a,b)&&a.push(b);return a},popFirst:function(a,b){var c=y(a,b);-1<c&&a.splice(c,1);return a},clone:p,randomUUID:b,escapeURIComponent:c,formatURI:f,inherits:w,InitializationError:i};q.JSV=A;u("./environments")})()},
"uri/schemes/urn":function(q,u){var j=u("../uri"),d=j.URI,g=j.pctEncChar,k=/^urn\:((?:[0-9A-Za-z][0-9A-Za-z\-]{1,31}))$/,a=RegExp("^((?:[0-9A-Za-z][0-9A-Za-z\\-]{1,31}))\\:((?:(?:(?:\\%[0-9A-Fa-f]{2})|[0-9A-Za-z\\(\\)\\+\\,\\-\\.\\:\\=\\@\\;\\$\\_\\!\\*\\'\\/\\?\\#])+))$"),b=/^([^\:]+)\:(.*)/,c=/[\x00-\x20\\\"\&\<\>\[\]\^\`\{\|\}\~\x7F-\xFF]/g,f=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/;d.SCHEMES.urn={parse:function(c,g){var f=c.path.match(a),h,j;f||(g.tolerant||c.errors.push("URN is not strictly valid."),
f=c.path.match(b));f?(h="urn:"+f[1].toLowerCase(),(j=d.SCHEMES[h])||(j=d.SCHEMES[h]={}),j.serialize||(j.serialize=d.SCHEMES.urn.serialize),c.scheme=h,c.path=f[2],j.parse&&j.parse(c,g)):c.errors.push("URN can not be parsed.");return c},serialize:function(a,b){var d=a.scheme||b.scheme,f;d&&"urn"!==d&&((f=d.match(k))||(f=["urn:"+d,d]),a.scheme="urn",a.path=f[1]+":"+(a.path?a.path.replace(c,g):""));return a}};d.SCHEMES["urn:uuid"]={serialize:function(a,b){if(!b.tolerant&&(!a.path||!a.path.match(f)))a.scheme=
void 0;return d.SCHEMES.urn.serialize(a,b)}}},"uri/uri":function(q,u){"undefined"===typeof q&&(q={});"function"!==typeof u&&(u=function(){return q});var j=function(a){for(var b=arguments[0],c=1,d=arguments[c];d;)b=b.slice(0,-1)+d.slice(1),d=arguments[++c];return b},d=function(a){return"(?:"+a+")"},g=j("[0-9]","[A-Fa-f]"),k=d("%"+g+g),a=j("[\\:\\/\\?\\#\\[\\]\\@]","[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),b=j("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]"),c=d("[A-Za-z]"+j("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),
f=d(d(k+"|"+j(b,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:]"))+"*"),e=d(d("25[0-5]")+"|"+d("2[0-4][0-9]")+"|"+d("1[0-9][0-9]")+"|"+d("[1-9][0-9]")+"|[0-9]"),e=d(e+"\\."+e+"\\."+e+"\\."+e),i=d(g+"{1,4}");d(d(i+"\\:"+i)+"|"+e);var i=d(j(b,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:]")+"+"),g=d("v"+g+"+\\."+j(b,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:]")+"+"),g=d("\\["+d(i+"|"+g)+"\\]"),i=d(d(k+"|"+j(b,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"))+"*"),e=d(g+"|"+e+"|"+i),g=d("[0-9]*"),l=d(d(f+"@")+"?"+
e+d("\\:"+g)+"?"),h=d(k+"|"+j(b,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:\\@]")),i=d(h+"*"),p=d(h+"+"),m=d(d(k+"|"+j(b,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\@]"))+"+"),i=d(d("\\/"+i)+"*"),t=d("\\/"+d(p+i)+"?"),m=d(m+i),p=d(p+i),w=d("");d(i+"|"+t+"|"+m+"|"+p+"|"+w);var n=d(d(h+"|[\\/\\?]")+"*"),h=d(d(h+"|[\\/\\?]")+"*"),C=d(d("\\/\\/"+l+i)+"|"+t+"|"+p+"|"+w),v=d(c+"\\:"+C+d("\\?"+n)+"?"+d("\\#"+h)+"?"),l=d(d("\\/\\/"+l+i)+"|"+t+"|"+m+"|"+w),l=d(l+d("\\?"+n)+"?"+d("\\#"+h)+"?");d(v+"|"+l);d(c+
"\\:"+C+d("\\?"+n)+"?");var s=RegExp("^"+d("("+v+")|("+l+")")+"$"),z=RegExp("^("+c+")\\:"+d(d("\\/\\/("+d("("+f+")@")+"?("+e+")"+d("\\:("+g+")")+"?)")+"?("+i+"|"+t+"|"+p+"|"+w+")")+d("\\?("+n+")")+"?"+d("\\#("+h+")")+"?$"),A=RegExp("^(){0}"+d(d("\\/\\/("+d("("+f+")@")+"?("+e+")"+d("\\:("+g+")")+"?)")+"?("+i+"|"+t+"|"+m+"|"+w+")")+d("\\?("+n+")")+"?"+d("\\#("+h+")")+"?$");d(d("\\/\\/("+d("("+f+")@")+"?("+e+")"+d("\\:("+g+")")+"?)")+"?("+i+"|"+t+"|"+p+"|"+w+")");d("\\?("+n+")");d("\\#("+h+")");d("("+
f+")@");d("\\:("+g+")");var y=RegExp(j("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),B=RegExp(j("[^\\%\\:]",b,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),L=RegExp(j("[^\\%]",b,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),M=RegExp(j("[^\\%\\/\\:\\@]",b,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),N=RegExp(j("[^\\%\\/\\@]",b,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),G=RegExp(j("[^\\%]",b,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:\\@\\/\\?]"),"g"),O=RegExp(j("[^]",b,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),
"g"),P=RegExp(b,"g");j("[^\\%]",b,a);var H=RegExp(k+"+","g"),Q=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/i,I=/^\.\.?\//,J=/^\/\.(\/|$)/,K=/^\/\.\.(\/|$)/,R=/^\/?.*?(?=\/|$)/,S=void 0==="".match(/(){0}/)[1],x=function(a){a=a.charCodeAt(0);return 128>a?"%"+a.toString(16).toUpperCase():127<a&&2048>a?"%"+(a>>6|192).toString(16).toUpperCase()+"%"+(a&63|128).toString(16).toUpperCase():"%"+(a>>12|224).toString(16).toUpperCase()+"%"+(a>>6&63|128).toString(16).toUpperCase()+
"%"+(a&63|128).toString(16).toUpperCase()},T=function(a){for(var b="",c=0,d;c<a.length;)d=parseInt(a.substr(c+1,2),16),128>d?(d=String.fromCharCode(d),b=d.match(P)?b+d:b+a.substr(c,3),c+=3):191<d&&224>d?(b+=a.substr(c,6),c+=6):(b+=a.substr(c,9),c+=9);return b},E=function(a){for(var b="",c=0,d,e,f;c<a.length;)d=parseInt(a.substr(c+1,2),16),128>d?(b+=String.fromCharCode(d),c+=3):191<d&&224>d?(e=parseInt(a.substr(c+4,2),16),b+=String.fromCharCode((d&31)<<6|e&63),c+=6):(e=parseInt(a.substr(c+4,2),16),
f=parseInt(a.substr(c+7,2),16),b+=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63),c+=9);return b},F=function(a){return void 0===a?"undefined":null===a?"null":Object.prototype.toString.call(a).split(" ").pop().split("]").shift().toLowerCase()},D=function(){this.errors=[]},r=q;D.prototype={scheme:void 0,authority:void 0,userinfo:void 0,host:void 0,port:void 0,path:void 0,query:void 0,fragment:void 0,reference:void 0,errors:void 0};r.SCHEMES={};r.parse=function(a,b){var c,d=new D,a=a?a.toString():"",
b=b||{};"suffix"===b.reference&&(a=(b.scheme?b.scheme+":":"")+"//"+a);(c=a.match(s))&&(c=c[1]?a.match(z):a.match(A));c||(b.tolerant||d.errors.push("URI is not strictly valid."),c=a.match(Q));c?(S?(d.scheme=c[1],d.authority=c[2],d.userinfo=c[3],d.host=c[4],d.port=parseInt(c[5],10),d.path=c[6]||"",d.query=c[7],d.fragment=c[8],isNaN(d.port)&&(d.port=c[5])):(d.scheme=c[1]||void 0,d.authority=-1!==a.indexOf("//")?c[2]:void 0,d.userinfo=-1!==a.indexOf("@")?c[3]:void 0,d.host=-1!==a.indexOf("//")?c[4]:void 0,
d.port=parseInt(c[5],10),d.path=c[6]||"",d.query=-1!==a.indexOf("?")?c[7]:void 0,d.fragment=-1!==a.indexOf("#")?c[8]:void 0,isNaN(d.port)&&(d.port=a.match(/\/\/.*\:(?:\/|\?|\#|$)/)?c[4]:void 0)),d.reference=!d.scheme&&!d.authority&&!d.path&&!d.query?"same-document":d.scheme?d.fragment?"uri":"absolute":"relative",b.reference&&("suffix"!==b.reference&&b.reference!==d.reference)&&d.errors.push("URI is not a "+b.reference+" reference."),(c=r.SCHEMES[(d.scheme||b.scheme||"").toLowerCase()])&&c.parse&&
c.parse(d,b)):d.errors.push("URI can not be parsed.");return d};r._recomposeAuthority=function(a){var b=[];if(void 0!==a.userinfo||void 0!==a.host||"number"===typeof a.port)void 0!==a.userinfo&&(b.push(a.userinfo.toString().replace(B,x)),b.push("@")),void 0!==a.host&&b.push(a.host.toString().toLowerCase().replace(L,x)),"number"===typeof a.port&&(b.push(":"),b.push(a.port.toString(10)));return b.length?b.join(""):void 0};r.removeDotSegments=function(a){for(var b=[],c;a.length;)a.match(I)?a=a.replace(I,
""):a.match(J)?a=a.replace(J,"/"):a.match(K)?(a=a.replace(K,"/"),b.pop()):"."===a||".."===a?a="":(c=a.match(R)[0],a=a.slice(c.length),b.push(c));return b.join("")};r.serialize=function(a,b){var c=[],d,b=b||{};(d=r.SCHEMES[a.scheme||b.scheme])&&d.serialize&&d.serialize(a,b);"suffix"!==b.reference&&a.scheme&&(c.push(a.scheme.toString().toLowerCase().replace(y,"")),c.push(":"));a.authority=r._recomposeAuthority(a);void 0!==a.authority&&("suffix"!==b.reference&&c.push("//"),c.push(a.authority),a.path&&
"/"!==a.path.charAt(0)&&c.push("/"));a.path&&(d=r.removeDotSegments(a.path.toString().replace(/%2E/ig,".")),d=a.scheme?d.replace(M,x):d.replace(N,x),void 0===a.authority&&(d=d.replace(/^\/\//,"/%2F")),c.push(d));a.query&&(c.push("?"),c.push(a.query.toString().replace(G,x)));a.fragment&&(c.push("#"),c.push(a.fragment.toString().replace(G,x)));return c.join("").replace(H,T).replace(/%[0-9A-Fa-f]{2}/g,function(a){return a.toUpperCase()})};r.resolveComponents=function(a,b,c,d){var e=new D;d||(a=r.parse(r.serialize(a,
c),c),b=r.parse(r.serialize(b,c),c));c=c||{};!c.tolerant&&b.scheme?(e.scheme=b.scheme,e.authority=b.authority,e.userinfo=b.userinfo,e.host=b.host,e.port=b.port,e.path=r.removeDotSegments(b.path),e.query=b.query):(void 0!==b.authority?(e.authority=b.authority,e.userinfo=b.userinfo,e.host=b.host,e.port=b.port,e.path=r.removeDotSegments(b.path),e.query=b.query):(b.path?("/"===b.path.charAt(0)?e.path=r.removeDotSegments(b.path):(e.path=void 0!==a.authority&&!a.path?"/"+b.path:a.path?a.path.slice(0,a.path.lastIndexOf("/")+
1)+b.path:b.path,e.path=r.removeDotSegments(e.path)),e.query=b.query):(e.path=a.path,e.query=void 0!==b.query?b.query:a.query),e.authority=a.authority,e.userinfo=a.userinfo,e.host=a.host,e.port=a.port),e.scheme=a.scheme);e.fragment=b.fragment;return e};r.resolve=function(a,b,c){return r.serialize(r.resolveComponents(r.parse(a,c),r.parse(b,c),c,!0),c)};r.normalize=function(a,b){return"string"===typeof a?r.serialize(r.parse(a,b),b):"object"===F(a)?r.parse(r.serialize(a,b),b):a};r.equal=function(a,b,
c){"string"===typeof a?a=r.serialize(r.parse(a,c),c):"object"===F(a)&&(a=r.serialize(a,c));"string"===typeof b?b=r.serialize(r.parse(b,c),c):"object"===F(b)&&(b=r.serialize(b,c));return a===b};r.escapeComponent=function(a){return a&&a.toString().replace(O,x)};r.unescapeComponent=function(a){return a&&a.toString().replace(H,E)};q.pctEncChar=x;q.pctDecChars=E;q.Components=D;q.URI=r;q.pctEncChar=x;q.pctDecChars=E;q.Components=D;q.URI={SCHEMES:r.SCHEMES,parse:r.parse,removeDotSegments:r.removeDotSegments,
serialize:r.serialize,resolveComponents:r.resolveComponents,resolve:r.resolve,normalize:r.normalize,equal:r.equal,escapeComponent:r.escapeComponent,unescapeComponent:r.unescapeComponent}},shim:function(q,u){q.validate=function(j,d,g,k){var a,b,c;a=u("jsv").JSV;j=j?a.createEnvironment(j):a.createEnvironment();for(b in d)d.hasOwnProperty(b)&&(c=d[b],a=JSON.parse(c.data),c=c.schema||void 0,j.createSchema(a,c,b));a=JSON.parse(g);d=JSON.parse(k);return{errors:j.validate(a,d).errors}}}});
